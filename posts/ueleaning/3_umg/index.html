<!DOCTYPE html>
<html lang="en-us">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <title>
    UMG | 
    
    GeeTeng</title>

<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<meta name="description" content="作业：实现登录注册界面，密码加密，设置界面（按键修改、语言设置、分辨率更改）
    ">


<meta property="og:url" content="http://localhost:1313/posts/ueleaning/3_umg/">
  <meta property="og:site_name" content="GeeTeng">
  <meta property="og:title" content="UMG">
  <meta property="og:description" content="作业：实现登录注册界面，密码加密，设置界面（按键修改、语言设置、分辨率更改）">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-12-13T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-12-13T00:00:00+00:00">
    <meta property="article:tag" content="UE5">


  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="UMG">
  <meta name="twitter:description" content="作业：实现登录注册界面，密码加密，设置界面（按键修改、语言设置、分辨率更改）">


  <meta itemprop="name" content="UMG">
  <meta itemprop="description" content="作业：实现登录注册界面，密码加密，设置界面（按键修改、语言设置、分辨率更改）">
  <meta itemprop="datePublished" content="2024-12-13T00:00:00+00:00">
  <meta itemprop="dateModified" content="2024-12-13T00:00:00+00:00">
  <meta itemprop="wordCount" content="861">
  <meta itemprop="keywords" content="UE5">
<link rel="canonical" href="http://localhost:1313/posts/ueleaning/3_umg/" />

<link rel="icon" type="image/png" href="http://localhost:1313/image/favicon.ico">

<link rel="stylesheet" href="/css/font-awesome.min.css">
<link rel="stylesheet" href="/css/bulma.min.css">

<link rel="stylesheet" href="https://cdn.jsdmirror.com/npm/katex@0.16.11/dist/katex.min.css" />
<script defer src="https://cdn.jsdmirror.com/npm/katex@0.16.11/dist/katex.min.js" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdmirror.com/npm/katex@0.16.11/dist/contrib/auto-render.min.js" crossorigin="anonymous"
  onload="renderMathInElement(document.body, {
          delimiters: [
            { left: '$$', right: '$$', display: true },
            { left: '$', right: '$', display: false }
          ],
          throwOnError: false
        });"></script>


<script src=/js/ramium.js></script>
<link rel="stylesheet" href=/css/ramium.css>


<link rel="stylesheet" href=/css/chordsheet.css>



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css"
    integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js"
    integrity="sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz"
    crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js"
    integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous"
    onload="renderMathInElement(document.body);"></script>



</head>

<body>
    
     
    <style type="text/css">
        .fireworks {
            position: fixed;
            pointer-events: none;
            top: 0;
            left: 0;
            height: 100%;
            width: 100%;
        }
        #particles-js {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;    
            height: 100vh;   
            z-index: -1;     
        }
    </style>
    <canvas class="fireworks"></canvas>
<script src="/js/anime.min.js"></script>
<script src="/js/fireworks.js"></script>


    <script type="text/javascript">
        fireworks.setCanvasSize();
    </script>
    <nav class="navbar is-dark" role="navigation" aria-label="main navigation">
  <div class="navbar-brand">
    <a class="navbar-item" href=/>
      
      <strong>GeeTeng </strong>
      
    </a>

    <a role="button" class="navbar-burger burger" aria-label="menu" aria-expanded="false"
      data-target="navbarBasicExample">
      <span aria-hidden="true"></span>
      <span aria-hidden="true"></span>
      <span aria-hidden="true"></span>
    </a>
  </div>

  <div id="navbarBasicExample" class="navbar-menu">
    <div class="navbar-start">
      
      
      <a class="navbar-item" href="/">Home</a>
      
      
      
      <div class="navbar-item has-dropdown is-hoverable">
        <a class="navbar-link">This Blog</a>
        <div class="navbar-dropdown">
          
          <a class="navbar-item" href="/tags/">All Tags</a>
          
          <a class="navbar-item" href="/posts/">All Posts</a>
          
        </div>
      </div>
      
      
      
      <a class="navbar-item" href="/about-me/">About Me</a>
      
      
    </div>

    <div class="navbar-end">
      

      
      <div class="navbar-item">
        <form id="cse-search-box-form-id" onsubmit="return executeQuery();" role="search">
          <div class="field has-addons">
            <div class="control is-expanded">
              <input id="cse-search-input-box-id" size=15 class="input" type="text" autocomplete="off"
                placeholder="&#xf1a0; Google search" style="font-family:Arial, FontAwesome">
            </div>

            <div class="control">
              <button type="submit" class="button is-black">
                <i class="fa fa-search"></i>
                </a>
              </button>
            </div>
          </div>
        </form>
      </div>
      
    </div>
  </div>
</nav><div class="columns is-centered">
        <div id="page-body" class="column is-7">

<div class="content-wrapper">
    
    
    <nav id="TableOfContents" class="table-of-contents">
        <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#创建主页面">创建主页面</a></li>
        <li><a href="#切换面板">切换面板</a></li>
        <li><a href="#更改屏幕分辨率">更改屏幕分辨率</a></li>
        <li><a href="#更改语言">更改语言</a></li>
        <li><a href="#背景音乐">背景音乐</a></li>
        <li><a href="#更改操作键">更改操作键</a></li>
        <li><a href="#登录">登录</a></li>
        <li><a href="#注册">注册</a></li>
        <li><a href="#场景加载">场景加载</a></li>
      </ul>
    </li>
  </ul>
</nav>
    </nav>
    

    
    <div class="content blog">
        <h1>UMG</h1>

        <div id="infobar" class="level is-mobile">
            <div class="level-left">
                
                <div class="level-item">
                    <p class="subtitle info date">Dec 13, 2024
                    </p>
                </div>
                

                <div class="level-item">
                    <p class="subtitle info">
                        18 mins read
                    </p>
                </div>
            </div>
            <div class="level-right is-hidden-touch">
                <div class="tags">
                    
                    <a class="tag is-dark is-rounded" href="/tags/ue5">UE5</a>
                    
                </div>
            </div>
        </div>

        <div class="tags is-hidden-desktop">
            
            <a class="tag is-dark is-rounded" href="/tags/ue5">Ue5</a>
            
        </div>

        <div class="blog-text">
            

            <p>可直接跳转到文末查看最终效果图</p>
<hr>
<h2 id="创建主页面">创建主页面</h2>
<p>新建HUD类-MainUIHUD和GameMode-MainMenuGameMode，并新建BP_UIGameMode蓝图类。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#75715e">// 将该HUD绑定到该GameMode上
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>AMainMenuGameMode<span style="color:#f92672">::</span>AMainMenuGameMode() {
</span></span><span style="display:flex;"><span>	HUDClass <span style="color:#f92672">=</span> AMainUIHUD<span style="color:#f92672">::</span>StaticClass();
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>在MainUIHUD中加载主界面，新建UserWidget类MainUIHUD和继承其的蓝图（往后每一个界面都是这样的创建方式）</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">UMainUserWidget</span>;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">protected</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	UPROPERTY()
</span></span><span style="display:flex;"><span>	UMainUserWidget<span style="color:#f92672">*</span> MainUserWidget;
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&#34;MenuLevel/MainUserWidget.h&#34;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">void</span> AMainUIHUD<span style="color:#f92672">::</span>BeginPlay()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	Super<span style="color:#f92672">::</span>BeginPlay();
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// 显示UI 加载蓝图类
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	TSubclassOf<span style="color:#f92672">&lt;</span>UMainUserWidget<span style="color:#f92672">&gt;</span> WidgetClass <span style="color:#f92672">=</span> LoadClass<span style="color:#f92672">&lt;</span>UMainUserWidget<span style="color:#f92672">&gt;</span>(<span style="color:#66d9ef">nullptr</span>,TEXT(<span style="color:#e6db74">&#34;/Script/UMGEditor.WidgetBlueprint&#39;/Game/FPSGame/UI/UMG/UMG_MainUI.UMG_MainUI_C&#39;&#34;</span>));
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> (WidgetClass)
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		<span style="color:#75715e">// CreatWidget()
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		MainUserWidget <span style="color:#f92672">=</span> CreateWidget<span style="color:#f92672">&lt;</span>UMainUserWidget<span style="color:#f92672">&gt;</span>(GetOwningPlayerController(), WidgetClass);
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">if</span> (MainUserWidget)
</span></span><span style="display:flex;"><span>		{
</span></span><span style="display:flex;"><span>			MainUserWidget<span style="color:#f92672">-&gt;</span>AddToViewport();
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 显示鼠标
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	GetOwningPlayerController()<span style="color:#f92672">-&gt;</span>bShowMouseCursor <span style="color:#f92672">=</span> true;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>创建主页面（图片文字为后加上的）</p>
<p><img src="/images/UE/GameMode/UMG_MainUI.png" alt="UMG_MainUI"></p>
<p>MainUserWidget</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#66d9ef">protected</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">virtual</span> <span style="color:#66d9ef">void</span> NativeOnInitialized() <span style="color:#66d9ef">override</span>;
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">virtual</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">NativeConstruct</span>() <span style="color:#66d9ef">override</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	UPROPERTY(meta<span style="color:#f92672">=</span>(BindWidgetAnim), Transient)
</span></span><span style="display:flex;"><span>	UWidgetAnimation<span style="color:#f92672">*</span> MenuUIAni;
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#66d9ef">void</span> UMainUserWidget<span style="color:#f92672">::</span>NativeOnInitialized()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	Super<span style="color:#f92672">::</span>NativeOnInitialized();
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> UMainUserWidget<span style="color:#f92672">::</span>NativeConstruct()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	Super<span style="color:#f92672">::</span>NativeConstruct();
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 制作了一个简单的动画 - 进入游戏按钮的透明度改变，并且按钮点击有音效
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	PlayAnimation(MenuUIAni);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>按钮的背景图是自己制作的 - 新建一个Material，提取UV坐标的R，[0, 1] * [1, 0] = &gt; 中间最大值为0.25 两边为0的渐变色</p>
<p><img src="/images/UE/GameMode/BtnMaterial.png" alt="BtnMaterial"></p>
<p>为了做设置面板，要新建OptionUserWidget，设置面板分为两个面板基础设置和按键设置</p>
<ul>
<li><strong>基础设置</strong>用来更改语言、分辨率、音量等</li>
<li><strong>按键设置</strong>用来更改游戏操作按键</li>
</ul>
<p>该面板有选择按钮、关闭按钮，加入一个重要的组件就是WidgetSwitcher能实现切换面板，而面板内容需要新建两个新的widget类分别为Widget_KeyOption按键设置面板内容和Widget_NormalOption基础设置面板内容。</p>
<p>BackgoundBlur设置模糊且Visible（防止点击到下一层）</p>
<p><img src="/images/UE/GameMode/UMG_Option.png" alt="UMG_Option"></p>
<hr>
<h2 id="切换面板">切换面板</h2>
<p>选择面板的蓝图，通过SetActiveWidgetIndex来切换面板</p>
<p><img src="/images/UE/GameMode/UMG_Option01.png" alt="UMG_Option01"></p>
<hr>
<h2 id="更改屏幕分辨率">更改屏幕分辨率</h2>
<p>Widget_NormalOption蓝图，新增了一个纯函数Get Window Mode（仅依赖传入的参数，不会改变外部状态）。</p>
<p><img src="/images/UE/GameMode/Widget_NormalOption.png" alt="Widget_NormalOption"></p>
<p>新增了一个EWindowMode类型的输出命名为Mode</p>
<p><img src="/images/UE/GameMode/GetWindowMode.png" alt="GetWindowMode"></p>
<hr>
<h2 id="更改语言">更改语言</h2>
<p>打开Tool-Localization Dashboard</p>
<p>勾选想要翻译的部分，C++中增加的FText和项目中有的文字。</p>
<p>![LocalizationDashboard]/images/UE/GameMode/LocalizationDashboard.png)</p>
<p>向下滑，由于游戏的语言是中文，所以默认是中文语言，新增一个语言（English），然后点击Gather Text，此时会看到中文是100%的进度，而英文是0%进度，所以点击右侧第一个按钮Edit translations for this culture，去自己增加对应的英文翻译。</p>
<p><img src="/images/UE/GameMode/GatherText.png" alt="GatherText"></p>
<p>翻译完之后点击CountWords和Compile Text就可以看到是百分百的状态。随着不断地增加字段，也需要更新这个操作。</p>
<p><img src="/images/UE/GameMode/Widget_NormalOption01.png" alt="Widget_NormalOption01"></p>
<hr>
<h2 id="背景音乐">背景音乐</h2>
<p>下载一个比较贴切FPS游戏的背景音乐，然后加载到资产中，新建一个SoundCue、一个混音器和一个音效类。SoundCue中右键Wave Player，添加背景音乐。左侧面板设置音效类。音效类添加passive sound mix modifiers设置混音器。</p>
<p>在Wiget_NormalOption中设置Slider的值变化与音效相关，并且需要在主面板的蓝图中Event Construct中Play Sound 2D选择背景音乐，这样才会一进入游戏就会播放。</p>
<p><img src="/images/UE/GameMode/SoundBGM.png" alt="SoundBGM"></p>
<p>至此基础设置面板结束，开始制作按键设置面板，预览图效果如下。</p>
<p><img src="/images/UE/GameMode/UMG_Normal.gif" alt="UMG_Normal"></p>
<hr>
<h2 id="更改操作键">更改操作键</h2>
<p>新建C++类-UserWidget - KeyInfoWidget，并新建蓝图继承它，用来按键集合</p>
<p>新增数据表格Data Table 选择KeyInfoHeader，在这之前需要有一些InputAction。</p>
<p>默认跳跃空格 移动WASD 开火左键</p>
<p><img src="/images/UE/GameMode/DT_KeyInfo.png" alt="DT_KeyInfo"></p>
<p>KeyInfoWidget文件</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#66d9ef">void</span> UKeyInfoWidget<span style="color:#f92672">::</span>NativeOnInitialized()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	Super<span style="color:#f92672">::</span>NativeOnInitialized();
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// 绑定按键拾取器
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	KeySelector<span style="color:#f92672">-&gt;</span>OnKeySelected.AddDynamic(<span style="color:#66d9ef">this</span>, <span style="color:#f92672">&amp;</span>UKeyInfoWidget<span style="color:#f92672">::</span>OnKeySelected);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> UKeyInfoWidget<span style="color:#f92672">::</span>OnKeySelected(FInputChord SelectedKey)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// 如果修改的键和当前键一样 就无需修改
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">if</span> (SelectedKey.Key <span style="color:#f92672">==</span> CurrentKey)
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">return</span>;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// 检查是否有别的行为键有被用
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#75715e">// 获取父容器
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">if</span> (UScrollBox<span style="color:#f92672">*</span> Box <span style="color:#f92672">=</span> Cast<span style="color:#f92672">&lt;</span>UScrollBox<span style="color:#f92672">&gt;</span>(GetParent()))
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		<span style="color:#75715e">// 取容器中所有内容
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		<span style="color:#66d9ef">for</span> (int32 i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> Box<span style="color:#f92672">-&gt;</span>GetChildrenCount(); <span style="color:#f92672">++</span>i)
</span></span><span style="display:flex;"><span>		{
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">if</span> (UKeyInfoWidget<span style="color:#f92672">*</span> KeyInfoWidget <span style="color:#f92672">=</span> Cast<span style="color:#f92672">&lt;</span>UKeyInfoWidget<span style="color:#f92672">&gt;</span>(Box<span style="color:#f92672">-&gt;</span>GetChildAt(i)))
</span></span><span style="display:flex;"><span>			{
</span></span><span style="display:flex;"><span>				<span style="color:#66d9ef">if</span> (KeyInfoWidget<span style="color:#f92672">-&gt;</span>CurrentKey <span style="color:#f92672">==</span> SelectedKey.Key)
</span></span><span style="display:flex;"><span>				{
</span></span><span style="display:flex;"><span>					<span style="color:#75715e">// 将按键改回原来按键 不让它改
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>					KeySelector<span style="color:#f92672">-&gt;</span>SetSelectedKey(CurrentKey);
</span></span><span style="display:flex;"><span>					<span style="color:#66d9ef">return</span>;
</span></span><span style="display:flex;"><span>				}
</span></span><span style="display:flex;"><span>			}
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> (KeyInfoHeader)
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		KeyInfoHeader<span style="color:#f92672">-&gt;</span>Key <span style="color:#f92672">=</span> SelectedKey.Key;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 初始化面板 获取datatable里面的字段
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">void</span> UKeyInfoWidget<span style="color:#f92672">::</span>InitPanel(FKeyInfoHeader<span style="color:#f92672">*</span> OutKeyInfoHeader)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> (OutKeyInfoHeader)
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		KeyDescribe<span style="color:#f92672">-&gt;</span>SetText(OutKeyInfoHeader<span style="color:#f92672">-&gt;</span>KeyDescribe);
</span></span><span style="display:flex;"><span>		KeySelector<span style="color:#f92672">-&gt;</span>SetSelectedKey(OutKeyInfoHeader<span style="color:#f92672">-&gt;</span>Key);
</span></span><span style="display:flex;"><span>		CurrentKey <span style="color:#f92672">=</span> OutKeyInfoHeader<span style="color:#f92672">-&gt;</span>Key;
</span></span><span style="display:flex;"><span>		KeyInfoHeader <span style="color:#f92672">=</span> OutKeyInfoHeader;
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> UKeyInfoWidget<span style="color:#f92672">::</span>ResetKey()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> (KeyInfoHeader)
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		<span style="color:#75715e">// 如果没修改过
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		<span style="color:#66d9ef">if</span> (CurrentKey <span style="color:#f92672">==</span> KeyInfoHeader<span style="color:#f92672">-&gt;</span>DefaultKey)
</span></span><span style="display:flex;"><span>		{
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">return</span>;
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>		KeyInfoHeader<span style="color:#f92672">-&gt;</span>Key <span style="color:#f92672">=</span> KeyInfoHeader<span style="color:#f92672">-&gt;</span>DefaultKey;
</span></span><span style="display:flex;"><span>		CurrentKey <span style="color:#f92672">=</span> KeyInfoHeader<span style="color:#f92672">-&gt;</span>DefaultKey;
</span></span><span style="display:flex;"><span>		KeySelector<span style="color:#f92672">-&gt;</span>SetSelectedKey(CurrentKey);
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>KeyOptionWidget文件</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#66d9ef">void</span> UKeyOptionWidget<span style="color:#f92672">::</span>NativeOnInitialized()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	Super<span style="color:#f92672">::</span>NativeOnInitialized();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	KeyMappingData <span style="color:#f92672">=</span> LoadObject<span style="color:#f92672">&lt;</span>UDataTable<span style="color:#f92672">&gt;</span>(<span style="color:#66d9ef">this</span>, TEXT(<span style="color:#e6db74">&#34;/Script/Engine.DataTable&#39;/Game/FPSGame/Data/KeyInfoData.KeyInfoData&#39;&#34;</span>));
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> (KeyMappingData)
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		TSubclassOf<span style="color:#f92672">&lt;</span>UKeyInfoWidget<span style="color:#f92672">&gt;</span> KeyInfoClass <span style="color:#f92672">=</span> LoadClass<span style="color:#f92672">&lt;</span>UKeyInfoWidget<span style="color:#f92672">&gt;</span>(<span style="color:#66d9ef">nullptr</span>, TEXT(<span style="color:#e6db74">&#34;/Script/UMGEditor.WidgetBlueprint&#39;/Game/FPSGame/UI/UMG/Widget/Widget_KeyInfo.Widget_KeyInfo_C&#39;&#34;</span>));
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		TArray<span style="color:#f92672">&lt;</span>FKeyInfoHeader<span style="color:#f92672">*&gt;</span> KeyInfos;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		KeyMappingData<span style="color:#f92672">-&gt;</span>GetAllRows<span style="color:#f92672">&lt;</span>FKeyInfoHeader<span style="color:#f92672">&gt;</span>(TEXT(<span style="color:#e6db74">&#34;Load KeyMapper Error&#34;</span>), KeyInfos);
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">auto</span> Key : KeyInfos)
</span></span><span style="display:flex;"><span>		{
</span></span><span style="display:flex;"><span>			UKeyInfoWidget<span style="color:#f92672">*</span> KeyInfoWidget <span style="color:#f92672">=</span> CreateWidget<span style="color:#f92672">&lt;</span>UKeyInfoWidget<span style="color:#f92672">&gt;</span>(GetOwningPlayer(), KeyInfoClass);
</span></span><span style="display:flex;"><span>			KeyInfoWidget<span style="color:#f92672">-&gt;</span>InitPanel(Key);
</span></span><span style="display:flex;"><span>			KeyScollBox<span style="color:#f92672">-&gt;</span>AddChild(KeyInfoWidget);
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 重置所有按键
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">void</span> UKeyOptionWidget<span style="color:#f92672">::</span>ResetAllKey()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">// 遍历全部KeyScollBox中的按键调用KeyInfo中的重置按键到DefaultKey的方法
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">for</span> (int32 i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> KeyScollBox<span style="color:#f92672">-&gt;</span>GetChildrenCount(); <span style="color:#f92672">++</span>i)
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">if</span> (UKeyInfoWidget<span style="color:#f92672">*</span> KeyInfoWidget <span style="color:#f92672">=</span> Cast<span style="color:#f92672">&lt;</span>UKeyInfoWidget<span style="color:#f92672">&gt;</span>(KeyScollBox<span style="color:#f92672">-&gt;</span>GetChildAt(i)))
</span></span><span style="display:flex;"><span>		{
</span></span><span style="display:flex;"><span>			KeyInfoWidget<span style="color:#f92672">-&gt;</span>ResetKey();
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>最终效果图如下</p>
<p><img src="/images/UE/GameMode/KeyInfo.gif" alt="KeyInfo"></p>
<hr>
<h2 id="登录">登录</h2>
<p>新建LoginUserWidget类（登陆注册界面）</p>
<p>在MainUIHUD中绑定该界面，由于要绑定的界面太多了，可以写一个模板函数去复用这个操作。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#66d9ef">template</span><span style="color:#f92672">&lt;</span><span style="color:#66d9ef">typename</span> T<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> AMainUIHUD<span style="color:#f92672">::</span>MakeUserWidget(T<span style="color:#f92672">*&amp;</span> Widget, <span style="color:#66d9ef">const</span> TCHAR<span style="color:#f92672">*</span> Path)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span>Widget)
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		TSubclassOf<span style="color:#f92672">&lt;</span>T<span style="color:#f92672">&gt;</span> WidgetClass <span style="color:#f92672">=</span> LoadClass<span style="color:#f92672">&lt;</span>T<span style="color:#f92672">&gt;</span>(<span style="color:#66d9ef">nullptr</span>, Path);
</span></span><span style="display:flex;"><span>		Widget <span style="color:#f92672">=</span> CreateWidget<span style="color:#f92672">&lt;</span>T<span style="color:#f92672">&gt;</span>(GetOwningPlayerController(), WidgetClass);
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>或者用宏</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#75715e">#define MAKEUSERWIDFETOBJ(UserWidgetClass, UserWidgetObj, Path) if (!UserWidgetObj)\
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">	{\
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">		TSubclassOf&lt;UserWidgetClass&gt; BPClass = LoadClass&lt;UserWidgetClass&gt;(nullptr, Path);\
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">		UserWidgetObj = CreateWidget&lt;UserWidgetClass&gt;(GetOwningPlayerController(), BPClass);\
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">	}
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#undef MAKEUSERWIDFETOBJ
</span></span></span></code></pre></div><p><img src="/images/UE/GameMode/UMG_Login.png" alt="UMG_Login"></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#66d9ef">protected</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	UFUNCTION(BlueprintCallable)
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">void</span> LoginGame();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">protected</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	UPROPERTY(meta<span style="color:#f92672">=</span>(BindWidget))
</span></span><span style="display:flex;"><span>	UEditableTextBox<span style="color:#f92672">*</span> AccountTextBox;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	UPROPERTY(meta <span style="color:#f92672">=</span> (BindWidget))
</span></span><span style="display:flex;"><span>	UEditableTextBox<span style="color:#f92672">*</span> PasswordTextBox;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// 是否保存账号密码
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	UPROPERTY(meta <span style="color:#f92672">=</span> (BindWidget))
</span></span><span style="display:flex;"><span>	UCheckBox<span style="color:#f92672">*</span> SaveCheckBox;
</span></span></code></pre></div><p>强制绑定需要修改蓝图中的名称 一一对应上。</p>
<p><img src="/images/UE/GameMode/UMGLogin01.png" alt="UMGLogin01"></p>
<p>新建一个C++类继承SaveGame - LoginSaveGame</p>
<p><img src="/images/UE/GameMode/SaveGame.png" alt="SaveGame"></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#75715e">// 需要存储的字段
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>UPROPERTY()
</span></span><span style="display:flex;"><span>FString Account;
</span></span><span style="display:flex;"><span>UPROPERTY()
</span></span><span style="display:flex;"><span>FString Password;
</span></span></code></pre></div><p>LoginUserWidget文件</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#66d9ef">protected</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	UFUNCTION(BlueprintCallable)
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">void</span> LoginGame();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">virtual</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">NativeOnInitialized</span>() <span style="color:#66d9ef">override</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">protected</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	UPROPERTY(meta<span style="color:#f92672">=</span>(BindWidget))
</span></span><span style="display:flex;"><span>	UEditableTextBox<span style="color:#f92672">*</span> AccountTextBox;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	UPROPERTY(meta <span style="color:#f92672">=</span> (BindWidget))
</span></span><span style="display:flex;"><span>	UEditableTextBox<span style="color:#f92672">*</span> PasswordTextBox;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// 是否保存账号密码
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	UPROPERTY(meta <span style="color:#f92672">=</span> (BindWidget))
</span></span><span style="display:flex;"><span>	UCheckBox<span style="color:#f92672">*</span> SaveCheckBox;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	UPROPERTY()
</span></span><span style="display:flex;"><span>	ULoginSaveGame<span style="color:#f92672">*</span> LoginSaveGame;
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#66d9ef">void</span> ULoginUserWidget<span style="color:#f92672">::</span>LoginGame()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// 如果勾选保存
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">if</span> (SaveCheckBox<span style="color:#f92672">-&gt;</span>IsChecked())
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		<span style="color:#75715e">// 保存文档
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		<span style="color:#75715e">// 如果之前没存过 就创建一个新的存档对象
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		<span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span>LoginSaveGame)
</span></span><span style="display:flex;"><span>		{
</span></span><span style="display:flex;"><span>			LoginSaveGame <span style="color:#f92672">=</span> Cast<span style="color:#f92672">&lt;</span>ULoginSaveGame<span style="color:#f92672">&gt;</span>(UGameplayStatics<span style="color:#f92672">::</span>CreateSaveGameObject(ULoginSaveGame<span style="color:#f92672">::</span>StaticClass()));
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>		LoginSaveGame<span style="color:#f92672">-&gt;</span>Account <span style="color:#f92672">=</span> AccountTextBox<span style="color:#f92672">-&gt;</span>GetText().ToString();
</span></span><span style="display:flex;"><span>		LoginSaveGame<span style="color:#f92672">-&gt;</span>Password <span style="color:#f92672">=</span> PasswordTextBox<span style="color:#f92672">-&gt;</span>GetText().ToString();
</span></span><span style="display:flex;"><span>		<span style="color:#75715e">// 存档 (存和读用一个名称)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		UGameplayStatics<span style="color:#f92672">::</span>SaveGameToSlot(LoginSaveGame, TEXT(<span style="color:#e6db74">&#34;LoginSaveGame&#34;</span>), <span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		<span style="color:#75715e">// 如果没有勾选保存就删掉存档
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		UGameplayStatics<span style="color:#f92672">::</span>DeleteGameInSlot(TEXT(<span style="color:#e6db74">&#34;LoginSaveGame&#34;</span>), <span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> ULoginUserWidget<span style="color:#f92672">::</span>NativeOnInitialized()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	Super<span style="color:#f92672">::</span>NativeOnInitialized();
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// 如果存在存档
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">if</span> (UGameplayStatics<span style="color:#f92672">::</span>DoesSaveGameExist(TEXT(<span style="color:#e6db74">&#34;LoginSaveGame&#34;</span>), <span style="color:#ae81ff">0</span>))
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		<span style="color:#75715e">// 加载存档 设置账号密码字段 以及 checkbox状态
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		LoginSaveGame <span style="color:#f92672">=</span> Cast<span style="color:#f92672">&lt;</span>ULoginSaveGame<span style="color:#f92672">&gt;</span>(UGameplayStatics<span style="color:#f92672">::</span>LoadGameFromSlot(TEXT(<span style="color:#e6db74">&#34;LoginSaveGame&#34;</span>), <span style="color:#ae81ff">0</span>));
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">if</span> (LoginSaveGame)
</span></span><span style="display:flex;"><span>		{
</span></span><span style="display:flex;"><span>			AccountTextBox<span style="color:#f92672">-&gt;</span>SetText(FText<span style="color:#f92672">::</span>FromString(LoginSaveGame<span style="color:#f92672">-&gt;</span>Account));
</span></span><span style="display:flex;"><span>			PasswordTextBox<span style="color:#f92672">-&gt;</span>SetText(FText<span style="color:#f92672">::</span>FromString(LoginSaveGame<span style="color:#f92672">-&gt;</span>Password));
</span></span><span style="display:flex;"><span>			SaveCheckBox<span style="color:#f92672">-&gt;</span>SetCheckedState(ECheckBoxState<span style="color:#f92672">::</span>Checked);
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><hr>
<h2 id="注册">注册</h2>
<p>新建C++类 - RegisterUserWidget 和 蓝图类 - UMG_Register</p>
<p>同样在MainUIHUD中绑定该页面</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-C++" data-lang="C++"><span style="display:flex;"><span><span style="color:#66d9ef">void</span> AMainUIHUD<span style="color:#f92672">::</span>ShowRegisterUI()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	MakeUserWidget<span style="color:#f92672">&lt;</span>URegisterUserWidget<span style="color:#f92672">&gt;</span>(RegisterUserWidget, TEXT(<span style="color:#e6db74">&#34;/Script/UMGEditor.WidgetBlueprint&#39;/Game/FPSGame/UI/UMG/UMG_Register.UMG_Register_C&#39;&#34;</span>));
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// 如果存在 且 不在视口中 则让它出现在视口中
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">if</span> (RegisterUserWidget <span style="color:#f92672">&amp;&amp;</span> <span style="color:#f92672">!</span>RegisterUserWidget<span style="color:#f92672">-&gt;</span>IsInViewport())
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		RegisterUserWidget<span style="color:#f92672">-&gt;</span>AddToViewport();
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>这里做一个邮箱发送验证码的伪功能，而不是真正的发送邮件。</p>
<p><img src="/images/UE/GameMode/UMG_Register.png" alt="UMG_Register"></p>
<p>该页面是通过登录页面中的注册账号按钮跳转过来，所以要在UMG_Login蓝图类中让它显示出来。</p>
<p><img src="/images/UE/GameMode/UMG_Login02.png" alt="UMG_Login02"></p>
<p>RegisterUserWidget文件 - 发送邮件倒计时逻辑</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#66d9ef">protected</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	UFUNCTION(BlueprintCallable)
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// 点击发送 触发发送邮件
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">void</span> SendMail();
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// 回调函数
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">OnColdDownCB</span>();
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// 更新按扭文字
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">UpdateButtonText</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">protected</span><span style="color:#f92672">:</span>
</span></span><span style="display:flex;"><span>	UPROPERTY(meta <span style="color:#f92672">=</span> (BindWidget))
</span></span><span style="display:flex;"><span>	UTextBlock<span style="color:#f92672">*</span> SendButtonText;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// 冷却中不允许点击
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	UPROPERTY(meta <span style="color:#f92672">=</span> (BindWidget))
</span></span><span style="display:flex;"><span>	UButton<span style="color:#f92672">*</span> SendButton;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	int32 ColdDownTime;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// 定时器句柄
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	FTimerHandle ColdDownTimeHandle;
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#75715e">// Fill out your copyright notice in the Description page of Project Settings.
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&#34;MenuLevel/RegisterUserWidget.h&#34;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&#34;Components/Button.h&#34;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e">#include</span> <span style="color:#75715e">&#34;Components/TextBlock.h&#34;</span><span style="color:#75715e">
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">void</span> URegisterUserWidget<span style="color:#f92672">::</span>SendMail()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// 发送时 就得停用按钮
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	SendButton<span style="color:#f92672">-&gt;</span>SetIsEnabled(false);
</span></span><span style="display:flex;"><span>	ColdDownTime <span style="color:#f92672">=</span> <span style="color:#ae81ff">5</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// 启动定时器 执行一次就结束了
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#75715e">// 获取世界对象定时器管理器FTimeManager 设置一个新的定时器
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#75715e">// 第一个参数是一个定时器句柄FTimerHandle 用于唯一标识这个定时器
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	GetWorld()<span style="color:#f92672">-&gt;</span>GetTimerManager().SetTimer(ColdDownTimeHandle, <span style="color:#66d9ef">this</span>, <span style="color:#f92672">&amp;</span>URegisterUserWidget<span style="color:#f92672">::</span>OnColdDownCB, <span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>	UpdateButtonText();
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 定时器触发时的回调函数
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">void</span> URegisterUserWidget<span style="color:#f92672">::</span>OnColdDownCB()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> (<span style="color:#f92672">--</span>ColdDownTime <span style="color:#f92672">&lt;=</span> <span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		<span style="color:#75715e">// 如果计时结束 发送按钮激活
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		SendButton<span style="color:#f92672">-&gt;</span>SetIsEnabled(true);
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		GetWorld()<span style="color:#f92672">-&gt;</span>GetTimerManager().SetTimer(ColdDownTimeHandle, <span style="color:#66d9ef">this</span>, <span style="color:#f92672">&amp;</span>URegisterUserWidget<span style="color:#f92672">::</span>OnColdDownCB, <span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	UpdateButtonText();
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 设置发送按钮的文本 在计时时的变化
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span><span style="color:#66d9ef">void</span> URegisterUserWidget<span style="color:#f92672">::</span>UpdateButtonText()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> (ColdDownTime <span style="color:#f92672">&lt;=</span> <span style="color:#ae81ff">0</span>)
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		SendButtonText<span style="color:#f92672">-&gt;</span>SetText(NSLOCTEXT(<span style="color:#e6db74">&#34;Register&#34;</span>, <span style="color:#e6db74">&#34;k1&#34;</span>, <span style="color:#e6db74">&#34;发送&#34;</span>));
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		<span style="color:#75715e">// 格式化文本 将数字转换成字符
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		SendButtonText<span style="color:#f92672">-&gt;</span>SetText(FText<span style="color:#f92672">::</span>Format(NSLOCTEXT(<span style="color:#e6db74">&#34;Register&#34;</span>, <span style="color:#e6db74">&#34;k1&#34;</span>, <span style="color:#e6db74">&#34;发送({0})&#34;</span>), FText<span style="color:#f92672">::</span>AsNumber(ColdDownTime)));
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>注册账号逻辑</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#66d9ef">void</span> URegisterUserWidget<span style="color:#f92672">::</span>RegisterUser()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	FString Account <span style="color:#f92672">=</span> AccountTextBox<span style="color:#f92672">-&gt;</span>GetText().ToString();
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// MD5加密
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	FString Password <span style="color:#f92672">=</span> EncryptPassword(PasswordTextBox<span style="color:#f92672">-&gt;</span>GetText().ToString());
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	ULoginSaveGame<span style="color:#f92672">*</span> LoadedSaveGame <span style="color:#f92672">=</span> Cast<span style="color:#f92672">&lt;</span>ULoginSaveGame<span style="color:#f92672">&gt;</span>(UGameplayStatics<span style="color:#f92672">::</span>LoadGameFromSlot(Account, <span style="color:#ae81ff">1</span>));
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// 账号已存在 不能注册
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">if</span> (LoadedSaveGame)
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		ShowFeedBkFail();
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// 账号不存在 可以注册
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		ShowFeedBkSuccess();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>		ULoginSaveGame<span style="color:#f92672">*</span> SaveGameInstance <span style="color:#f92672">=</span> Cast<span style="color:#f92672">&lt;</span>ULoginSaveGame<span style="color:#f92672">&gt;</span>(UGameplayStatics<span style="color:#f92672">::</span>CreateSaveGameObject(ULoginSaveGame<span style="color:#f92672">::</span>StaticClass()));
</span></span><span style="display:flex;"><span>		<span style="color:#66d9ef">if</span> (SaveGameInstance)
</span></span><span style="display:flex;"><span>		{
</span></span><span style="display:flex;"><span>			SaveGameInstance<span style="color:#f92672">-&gt;</span>Account <span style="color:#f92672">=</span> Account;
</span></span><span style="display:flex;"><span>			SaveGameInstance<span style="color:#f92672">-&gt;</span>Password <span style="color:#f92672">=</span> Password;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>			UGameplayStatics<span style="color:#f92672">::</span>SaveGameToSlot(SaveGameInstance, Account, <span style="color:#ae81ff">1</span>);
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// 加密
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>FString  URegisterUserWidget<span style="color:#f92672">::</span>EncryptPassword(<span style="color:#66d9ef">const</span> FString<span style="color:#f92672">&amp;</span> Password)
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// 转化成UTF-8字符数组
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	FTCHARToUTF8 <span style="color:#a6e22e">UTF8Password</span>(<span style="color:#f92672">*</span>Password);
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">const</span> uint8<span style="color:#f92672">*</span> Data <span style="color:#f92672">=</span> <span style="color:#66d9ef">reinterpret_cast</span><span style="color:#f92672">&lt;</span><span style="color:#66d9ef">const</span> uint8<span style="color:#f92672">*&gt;</span>(UTF8Password.Get());
</span></span><span style="display:flex;"><span>	int32 Length <span style="color:#f92672">=</span> UTF8Password.Length();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// MD5哈希
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	FMD5 MD5;
</span></span><span style="display:flex;"><span>	MD5.Update(Data, Length);
</span></span><span style="display:flex;"><span>	uint8 Digest[<span style="color:#ae81ff">16</span>];
</span></span><span style="display:flex;"><span>	MD5.Final(Digest);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	FString EncryptedPassword;
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">for</span> (uint8 Byte : Digest)
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		EncryptedPassword <span style="color:#f92672">+=</span> FString<span style="color:#f92672">::</span>Printf(TEXT(<span style="color:#e6db74">&#34;%02x&#34;</span>), Byte);
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">return</span> EncryptedPassword;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>修改登录逻辑</p>
<p>改为从savegame中获取已注册的账号。如果没有注册则返回“账号不存在 请注册”，如果注册了但是密码输入错误则返回“账号或密码错误”，如果账号存在且输入正确则登陆成功，同时也要加密登陆输入的密码。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c++" data-lang="c++"><span style="display:flex;"><span><span style="color:#66d9ef">void</span> ULoginUserWidget<span style="color:#f92672">::</span>LoginGame()
</span></span><span style="display:flex;"><span>{
</span></span><span style="display:flex;"><span>	FString Account <span style="color:#f92672">=</span> AccountTextBox<span style="color:#f92672">-&gt;</span>GetText().ToString();
</span></span><span style="display:flex;"><span>	FString Password <span style="color:#f92672">=</span> EncryptPassword(PasswordTextBox<span style="color:#f92672">-&gt;</span>GetText().ToString());
</span></span><span style="display:flex;"><span>	ULoginSaveGame<span style="color:#f92672">*</span> LoadedSaveGame <span style="color:#f92672">=</span> Cast<span style="color:#f92672">&lt;</span>ULoginSaveGame<span style="color:#f92672">&gt;</span>(UGameplayStatics<span style="color:#f92672">::</span>LoadGameFromSlot(Account, <span style="color:#ae81ff">1</span>));
</span></span><span style="display:flex;"><span>	<span style="color:#66d9ef">if</span> (LoadedSaveGame)
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		<span style="color:#75715e">// 如果登录账号已经注册过 且 密码匹配 则登陆成功
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		<span style="color:#66d9ef">if</span> (LoadedSaveGame<span style="color:#f92672">-&gt;</span>Account <span style="color:#f92672">==</span> Account <span style="color:#f92672">&amp;&amp;</span> LoadedSaveGame<span style="color:#f92672">-&gt;</span>Password <span style="color:#f92672">==</span> Password)
</span></span><span style="display:flex;"><span>		{
</span></span><span style="display:flex;"><span>			<span style="color:#75715e">// 如果勾选保存
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>			<span style="color:#66d9ef">if</span> (SaveCheckBox<span style="color:#f92672">-&gt;</span>IsChecked())
</span></span><span style="display:flex;"><span>			{
</span></span><span style="display:flex;"><span>				<span style="color:#75715e">// 保存文档
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>				<span style="color:#75715e">// 如果之前没存过 就创建一个新的存档对象
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>				<span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span>LoginSaveGame)
</span></span><span style="display:flex;"><span>				{
</span></span><span style="display:flex;"><span>					LoginSaveGame <span style="color:#f92672">=</span> Cast<span style="color:#f92672">&lt;</span>ULoginSaveGame<span style="color:#f92672">&gt;</span>(UGameplayStatics<span style="color:#f92672">::</span>CreateSaveGameObject(ULoginSaveGame<span style="color:#f92672">::</span>StaticClass()));
</span></span><span style="display:flex;"><span>				}
</span></span><span style="display:flex;"><span>				LoginSaveGame<span style="color:#f92672">-&gt;</span>Account <span style="color:#f92672">=</span> AccountTextBox<span style="color:#f92672">-&gt;</span>GetText().ToString();
</span></span><span style="display:flex;"><span>				LoginSaveGame<span style="color:#f92672">-&gt;</span>Password <span style="color:#f92672">=</span> PasswordTextBox<span style="color:#f92672">-&gt;</span>GetText().ToString();
</span></span><span style="display:flex;"><span>				<span style="color:#75715e">// 存档 (存和读用一个名称)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>				UGameplayStatics<span style="color:#f92672">::</span>SaveGameToSlot(LoginSaveGame, TEXT(<span style="color:#e6db74">&#34;LoginSaveGame&#34;</span>), <span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>			}
</span></span><span style="display:flex;"><span>			<span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span>			{
</span></span><span style="display:flex;"><span>				<span style="color:#75715e">// 如果没有勾选保存就删掉存档
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>				UGameplayStatics<span style="color:#f92672">::</span>DeleteGameInSlot(TEXT(<span style="color:#e6db74">&#34;LoginSaveGame&#34;</span>), <span style="color:#ae81ff">0</span>);
</span></span><span style="display:flex;"><span>			}
</span></span><span style="display:flex;"><span>			<span style="color:#75715e">// 进入游戏 打开游戏关卡
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>			UGameplayStatics<span style="color:#f92672">::</span>OpenLevel(<span style="color:#66d9ef">this</span>, FName(TEXT(<span style="color:#e6db74">&#34;FirstPersonMap&#34;</span>)));
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>		<span style="color:#75715e">// 否则账号密码错误
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>		<span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span>		{
</span></span><span style="display:flex;"><span>			ShowFeedBkError();
</span></span><span style="display:flex;"><span>		}
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>	<span style="color:#75715e">// 没有账号 提示注册
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	<span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span>	{
</span></span><span style="display:flex;"><span>		ShowFeedBkFail();
</span></span><span style="display:flex;"><span>	}
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>可以看到存储下来的密码都是加密过的。</p>
<p><img src="/images/UE/GameMode/RegisterSaveGame.png" alt="RegisterSaveGame"></p>
<h2 id="场景加载">场景加载</h2>
<p>下载了插件Async Loading Screen</p>
<p>然后在ProjectSetting中有一个AsyncLoadingScreen，在当中可以设置场景跳转的时候加载什么图片，修改颜色等。同时也可以设置开场动画。</p>
<p>我在网上随便找了一个CG动画作为游戏的开场动画。</p>
<p>最终效果图如下</p>
<p><img src="/images/UE/GameMode/Final.gif" alt="Login"></p>
<hr>
<p>关于射击操作面板，我还没有实现，想完善好玩法之后再增加这一部分内容。</p>

        </div>
    </div>
</div><div id="social-media-share" class="has-text-centered">
	<p><i>Sharing is caring!</i></p>
	<br>
	
	<div class="share-buttons">
	    <a  href="https://www.facebook.com/sharer/sharer.php?u=http%3a%2f%2flocalhost%3a1313%2fposts%2fueleaning%2f3_umg%2f"
	        onclick="socialMediaPopUp(this.href, '', 500, 500); return false;"
	        title="Share on Facebook. Opens in a new window.">
	        <img src=/img/icons/45px/facebook.png>
	    </a>

	    <a  href="https://twitter.com/intent/tweet?text=UMG&url=http%3a%2f%2flocalhost%3a1313%2fposts%2fueleaning%2f3_umg%2f"
	        onclick="socialMediaPopUp(this.href, '', 500, 500); return false;"
	        title="Share on Twitter. Opens in a new window." >
	        <img src=/img/icons/45px/twitter.png>
	    </a>

		<a  href="http://www.reddit.com/submit?url=http%3a%2f%2flocalhost%3a1313%2fposts%2fueleaning%2f3_umg%2f"
	        onclick="socialMediaPopUp(this.href, '', 900, 500); return false;"
	        title="Share on Reddit. Opens in a new window." >
	        <img src=/img/icons/45px/reddit.png>
	    </a>

	    <a  href="http://pinterest.com/pin/create/button/?url=http%3a%2f%2flocalhost%3a1313%2fposts%2fueleaning%2f3_umg%2f"
	        onclick="socialMediaPopUp(this.href, '', 900, 500); return false;"
	        title="Share on Pinterest. Opens in a new window." >
	        <img src=/img/icons/45px/pinterest.png>
	    </a>

	    <a  href="http://www.tumblr.com/share/link?url=http%3a%2f%2flocalhost%3a1313%2fposts%2fueleaning%2f3_umg%2f"
	        onclick="socialMediaPopUp(this.href, '', 900, 500); return false;"
	        title="Share on Tumblr. Opens in a new window." >
	        <img src=/img/icons/45px/tumblr.png>
	    </a>

		<a  href="https://www.linkedin.com/shareArticle?mini=true&url=http%3a%2f%2flocalhost%3a1313%2fposts%2fueleaning%2f3_umg%2f
			&title=UMG&summary=%e5%8f%af%e7%9b%b4%e6%8e%a5%e8%b7%b3%e8%bd%ac%e5%88%b0%e6%96%87%e6%9c%ab%e6%9f%a5%e7%9c%8b%e6%9c%80%e7%bb%88%e6%95%88%e6%9e%9c%e5%9b%be%0a%e5%88%9b%e5%bb%ba%e4%b8%bb%e9%a1%b5%e9%9d%a2%20%e6%96%b0%e5%bb%baHUD%e7%b1%bb-MainUIHUD%e5%92%8cGameMode-MainMenuGameMode%ef%bc%8c%e5%b9%b6%e6%96%b0%e5%bb%baBP_UIGameMode%e8%93%9d%e5%9b%be%e7%b1%bb%e3%80%82%0a%2f%2f%20%e5%b0%86%e8%af%a5HUD%e7%bb%91%e5%ae%9a%e5%88%b0%e8%af%a5GameMode%e4%b8%8a%20AMainMenuGameMode%3a%3aAMainMenuGameMode%28%29%20%7b%20HUDClass%20%3d%20AMainUIHUD%3a%3aStaticClass%28%29%3b%20%7d%20%e5%9c%a8MainUIHUD%e4%b8%ad%e5%8a%a0%e8%bd%bd%e4%b8%bb%e7%95%8c%e9%9d%a2%ef%bc%8c%e6%96%b0%e5%bb%baUserWidget%e7%b1%bbMainUIHUD%e5%92%8c%e7%bb%a7%e6%89%bf%e5%85%b6%e7%9a%84%e8%93%9d%e5%9b%be%ef%bc%88%e5%be%80%e5%90%8e%e6%af%8f%e4%b8%80%e4%b8%aa%e7%95%8c%e9%9d%a2%e9%83%bd%e6%98%af%e8%bf%99%e6%a0%b7%e7%9a%84%e5%88%9b%e5%bb%ba%e6%96%b9%e5%bc%8f%ef%bc%89%0aclass%20UMainUserWidget%3b%20protected%3a%20UPROPERTY%28%29%20UMainUserWidget%2a%20MainUserWidget%3b%20%23include%20%26%2334%3bMenuLevel%2fMainUserWidget.h%26%2334%3b%20void%20AMainUIHUD%3a%3aBeginPlay%28%29%20%7b%20Super%3a%3aBeginPlay%28%29%3b%20%2f%2f%20%e6%98%be%e7%a4%baUI%20%e5%8a%a0%e8%bd%bd%e8%93%9d%e5%9b%be%e7%b1%bb%20TSubclassOf%26lt%3bUMainUserWidget%26gt%3b%20WidgetClass%20%3d%20LoadClass%26lt%3bUMainUserWidget%26gt%3b%28nullptr%2cTEXT%28%26%2334%3b%2fScript%2fUMGEditor.WidgetBlueprint%26%2339%3b%2fGame%2fFPSGame%2fUI%2fUMG%2fUMG_MainUI.UMG_MainUI_C%26%2339%3b%26%2334%3b%29%29%3b%20if%20%28WidgetClass%29%20%7b%20%2f%2f%20CreatWidget%28%29%20MainUserWidget%20%3d%20CreateWidget%26lt%3bUMainUserWidget%26gt%3b%28GetOwningPlayerController%28%29%2c%20WidgetClass%29%3b%20if%20%28MainUserWidget%29%20%7b%20MainUserWidget-%26gt%3bAddToViewport%28%29%3b%20%7d%20%7d%20%2f%2f%20%e6%98%be%e7%a4%ba%e9%bc%a0%e6%a0%87%20GetOwningPlayerController%28%29-%26gt%3bbShowMouseCursor%20%3d%20true%3b%20%7d%20%e5%88%9b%e5%bb%ba%e4%b8%bb%e9%a1%b5%e9%9d%a2%ef%bc%88%e5%9b%be%e7%89%87%e6%96%87%e5%ad%97%e4%b8%ba%e5%90%8e%e5%8a%a0%e4%b8%8a%e7%9a%84%ef%bc%89%0aMainUserWidget%0aprotected%3a%20virtual%20void%20NativeOnInitialized%28%29%20override%3b%20virtual%20void%20NativeConstruct%28%29%20override%3b%20UPROPERTY%28meta%3d%28BindWidgetAnim%29%2c%20Transient%29%20UWidgetAnimation%2a%20MenuUIAni%3b%20void%20UMainUserWidget%3a%3aNativeOnInitialized%28%29%20%7b%20Super%3a%3aNativeOnInitialized%28%29%3b%20%7d%20void%20UMainUserWidget%3a%3aNativeConstruct%28%29%20%7b%20Super%3a%3aNativeConstruct%28%29%3b%20%2f%2f%20%e5%88%b6%e4%bd%9c%e4%ba%86%e4%b8%80%e4%b8%aa%e7%ae%80%e5%8d%95%e7%9a%84%e5%8a%a8%e7%94%bb%20-%20%e8%bf%9b%e5%85%a5%e6%b8%b8%e6%88%8f%e6%8c%89%e9%92%ae%e7%9a%84%e9%80%8f%e6%98%8e%e5%ba%a6%e6%94%b9%e5%8f%98%ef%bc%8c%e5%b9%b6%e4%b8%94%e6%8c%89%e9%92%ae%e7%82%b9%e5%87%bb%e6%9c%89%e9%9f%b3%e6%95%88%20PlayAnimation%28MenuUIAni%29%3b%20%7d%20%e6%8c%89%e9%92%ae%e7%9a%84%e8%83%8c%e6%99%af%e5%9b%be%e6%98%af%e8%87%aa%e5%b7%b1%e5%88%b6%e4%bd%9c%e7%9a%84%20-%20%e6%96%b0%e5%bb%ba%e4%b8%80%e4%b8%aaMaterial%ef%bc%8c%e6%8f%90%e5%8f%96UV%e5%9d%90%e6%a0%87%e7%9a%84R%ef%bc%8c%5b0%2c%201%5d%20%2a%20%5b1%2c%200%5d%20%3d%20%26gt%3b%20%e4%b8%ad%e9%97%b4%e6%9c%80%e5%a4%a7%e5%80%bc%e4%b8%ba0.&source=rafed123.github.io"
	        onclick="socialMediaPopUp(this.href, '', 900, 500); return false;"
	        title="Share on LinkedIn. Opens in a new window." >
	        <img src=/img/icons/45px/linkedin.png>
	    </a>

	    <a  href="mailto:?subject=UMG&amp;body=Check out this site http%3a%2f%2flocalhost%3a1313%2fposts%2fueleaning%2f3_umg%2f"
	        title="Share via Email. Opens in a new window." >
	        <img src=/img/icons/45px/mail.png>
	    </a>
	</div>
</div>


<br>
<div id="disqus_thread"></div>
<script type="text/javascript">
    (function () {
        
        
        if (window.location.hostname == "localhost")
            return;

        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        var disqus_shortname = 'disqus-code';
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>


        </div>
    </div>
<script async src="https://cse.google.com/cse.js?cx=google-search-code"></script>
<gcse:searchresults-only></gcse:searchresults-only>


<footer class="footer has-background-dark">
    <div class="content has-text-centered has-text-white">
        <p>
            © 2024 GeeTeng.My
            <a class="has-text-light" href="https://github.com/GeeTeng" target="_blank">
            GitHub</a>. 

	    Email: 15143483@qq.com
        </p>
    </div>
</footer>

<div id="particles-js"></div>
    <script src="/js/particles.min.js"></script>
    <script>
        particlesJS.load('particles-js', '/js/particlesjs-config.json', function() {
            console.log('callback - particles.js config loaded');
        });
    </script>
</body>

</html>
